# 보안, 인증

## 보안

### XSS

> Cross Site Scrpting의 줄임말.
>
> 게시판 혹은 email 같은 곳에 Script Code를 삽입해 개발자가 고려하지 않은 기능을 작동하게 하는 방식이다. 
>
> XSS는 공격 방법에 따라 Reflected XSS, Stored XSS로 구분된다. 
>
> Reflected XSS
>
> > Reflected XSS의 경우 공격 스크립트가 포함된 URL을 노출시켰을 때 사용자가 그 링크를 클릭하면 악성 스크립트가 실행되는 방식이다.
>
> ![image](https://github.com/dev-team-study/cs-study/assets/110332047/ac2a0e3d-9a9b-4fc3-a05e-8717ebec2eb4)
>
> Stored XSS
>
> > Stored XSS의 경우 악성 스크립트가 포함된 게시글을 올리고, 사용자가 게시글을 클릭하면 악성 스크립트가 실행되는 방식이다. 
>
> ![image](https://github.com/dev-team-study/cs-study/assets/110332047/5decb78b-32b8-4492-a553-2f995446244d)
>
> 위험성
>
> - 쿠키 정보 및 세션 ID 획득
> - 시스템 관리자 권한 획득
> - 악성코드 다운로드 
>
> 방지법
>
> - script 문자 필터링 
> - 외부 라이브러리 사용(Naver Lucy XSS Filter ... )

### SQL Injection

> 응용 프로그램 보안 상의 허점을 의도적으로 이용해, 악의적인 SQL문을 실행되게 함으로써 데이터베이스를 비정상적으로 조작하는 코드 인젝션 공격 방법
>
> SQL Injection 유형
>
> - Error Based SQL Injection
>   - 잘못된 문법이나 자료형 불일치 등에 의해 웹 브라우저에 표시되는 데이터베이스 오류를 기반으로 수행되는 공격 긱법
> - Union Based SQL Injection
>   - 공격자가 의도한 SQL을 UNION 연산자를 이용해 기존 SQL에 덧붙이고 기존 SQL을 무효화시켜 원하는 내부 데이터를 절취할 수 있는 공격 방법
>
> 대응 방법
>
> - 입력 값에 대한 검증을 해 이상한 값이 들어오지는 않는 지 확인한다.
> - Prepared Statement 구문 사용
>   - 사용자의 입력이 쿼리문이 아닌 문자열로 변경되어 들어가기 때문에 아무 의미 없는 값이 된다.

## 인증

> Cookie Session JWT 모두 HTTP가 지닌 Stateless, Connectionless 특성을 극복하기 나온 기술.

### cookie

> 클라이언트가 어떠한 웹사이트를 방문할 경우, 그 사이트가 사용하고 있는 서버를 통해 클라이언트의 브라우저에 설치되는 작은 기록 정보 파일 
>
> - 서버는 클라이언트의 로그인 요청에 대한 응답을 작성할 때, 클라이언트 측에 저장하고 싶은 정보를 응답 헤더의 Set-Cookie 에 담는다. 
> - Key - Value 형식을 지닌다. 
> - 이후 해당 클라이언트는 요청을 보낼 때 마다, 매번 저장된 쿠키를 요청 헤더의 Cookie에 담아 보낸다. 
>
> 단점
>
> - 요청시 쿠키의 값을 그대로 보낸다. 
> - 유출 및 조작 당할 위험이 존재한다. 
> - 쿠키에는 용량 제한이 있어 많은 정보를 담지 못한다.

### session

> 세션의 경우 비밀번호 등 클라이언트의 인증 정보를 쿠키가 아닌 서버 측에 저장하고 관리한다. 
>
> - 서버는 클라이언트의 로그인 요청에 대한 응답을 작성할 때, 인증 정보는 서버에 저장하고 클라이언트 식별자인 JSESSIONID를 쿠키에 담는다. 
> - 이후 클라이언트는 요청을 보낼 때 마다 JSESSIONID 쿠키를 함께 보낸다. 
>
> 장점
>
> - 쿠키를 포함한 요청이 외부에 유출되더라도 session id 자체로는 유의미한 개인 정보를 가지고 있지 않다.
>
> 단점
>
> - 서버에서 세션 저장소를 사용하기 때문에 요청이 많을 경우 서버에 부하가 심해진다.

### JWT

> JSON Web Token의 줄임말로 필요한 정보들을 암호화시킨 토큰을 말한다. 
>
> JWT의 경우 Header, Payload, Signature로 구성된다. 
>
> - Header 
>   - 암호화 할 해싱 알고리즘 및 토큰의 타입을 지정
> - Payload
>   - 토큰에 담을 정보를 가진다.
> - Signature
>   - 인코딩된 Header와 Payload를 더한 뒤 비밀키로 해싱해 생성한다. 
>
> 장점
>
> - Header와 Payload를 가지고 Signature를 생성하므로 데이터 위 변조를 막을 수 있다.
> - 인증 정보에 대한 별도의 저장소가 필요하지 않다.
>
> 단점
>
> - 쿠키 / 세션과 달리 토큰의 길이가 길어, 인증 요청이 많아질수록 네트워크 부하가 심해진다.
> - Payload자체는 암호화되지 않기 땜누에 유저의 중요한 정보는 담을 수 없다.
> - 토큰을 탈취당하면 대처하기가 어렵다 => Authorization, RefreshToken 사용.

---

### 질문

- XSS에 대해서 설명해주세요. 
- SQL Injection에 대해서 설명해주세요.
- 세션과 쿠키에 대해서 차이점을 설명해주세요.
- JWT는 무엇인가요.