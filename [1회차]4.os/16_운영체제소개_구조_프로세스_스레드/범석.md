# 운영체제 

## 운영체제 소개

### 운영체제 필요성

> - 컴퓨터는 운영체제가 없어도 작동하지만 기능에 제약이 따른다. 
> - 운영체제가 있으면 다양한 응용 프로그램을 사용할 수 있고 성능 향상을 위한 새로운 기능을 쉽게 추가할 수 있다.
> - 성능향상 뿐만 아니라 자원을 관리하고 사용자에게 편리한 인터페이스 환경을 제공한다.
> - 사용자가 직접적으로 자원에 접근하는 것을 막음으로써 컴퓨터 자원을 보호한다.
> - OS가 제공하는 사용자 인터페이스와 하드웨어 인터페이스를 이용해 자원을 접근한다. 

### 운영체제 정의

> 응용 프로그램이나 사용자에게 컴퓨터 자원을 사용할 수 있는 인터페이스를 제공하고 그 결과를 돌려주는 시스템이다.
>
> 응용프로그램이나 사용자에게 컴퓨터 자원을 숨기고 정해진 방법으로만 컴퓨터 자원을 사용할 수 있도록 제한한다.

### 운영체제 역할

> [주 역할]
>
> - 입출력 시스템 관리
> - 리소스 관리
> - 메모리 관리
>   - primitive principal : **모든 프로세스들은 공평하게 메모리를 할당 받아야 한다.**
> - CPU 관리
>   - primitive principal : 스레드에 CPU를 시분할로 할당한다. 
>
> [역할]
>
> - 자원 관리 
>   - 컴퓨터 시스템 자원을 응용프로그램에 나눠줘 사용자가 원할하게 작업할 수 있도록 해준다. 
> - 자원 보호 
>   - 비정상적인 작업으로부터 컴퓨터 자원을 보호한다. 
> - 하드웨어 인터페이스 제공 
>   - 사용자가 복잡한 과정 없이 다양한 장치를 사용할 수 있도록 해주는 하드웨어 인터페이스 제공
>   - 다양한 하드웨어를 일관된 방식으로 사용할 수 있도록 지원한다.
> - 사용자 인터페이스 제공
>   - 사용자가 운영체제를 편리하게 사용하도록 지원한다. 
>   - window GUI ... 

## 운영체제 구조

### 커널

> 운영체제의 핵심 부분으로 시스템의 다양한 부분을 관리하고 제어하는 역할을 한다. 
>
> 하드웨어와 프로세스간의 통신을 중재하고, 시스템 자원 및 하드웨어 저수준 관리를 담당한다. 
>
> 기능
>
> - 프로세스 관리 : 프로세스의 생성, 스케줄링, 관리 종료 등을 담당한다
> - 메모리 관리 : 물리적 및 가상 메모리, 메모리 할당 및 해제 등을 관리한다
> - 장치 드라이버 : 하드웨어 장치와의 통신을 위한 드라이버 인터페이스르 ㄹ제공
> - 시스템 호출 인터페이스 : 사용자 수준의 프로그램과 커널 간의 인터페이스를 제공한다.
> - 보안 및 접근 관리 : 시스템 보완과 접근 제어를 관리한다.
>
> 유형
>
> - 모놀리식 커널 : 모든 시스ㅡ템 서비스를 하나의 큰 프로세스 내에서 실행 
> - 마이크로 커널 : 최소한의 기능만을 제공하며, 대부분의 서비스는 사용자 공간에서 실행된다.
> - 하이브리드 커널 : 모놀리식 커널과 마이크로 커널의 특성을 혼합한 형태 

### 시스템 호출

> 시스템 호출은 프로그램이 운영체제의 서비스를 요청할 수 있게 하는 인터페이스. 
>
> 사용자 모드에서 실행되는 프로그램이 커널 모드의 기능을 이용할 수 있게 해준다. 
>
> 기능 
>
> - 자원 요청 : 파일 시스템, 통신, 프로세스 관리 등의 커널 서비스에 대한 접근을 제공
> - 프로세스 제어 : 프로세스 생성, 종료, 스케줄링 등을 관리
> - 파일 조작 : 파일 생성, 읽기, 쓰기, 닫기 등의 작업을 수행
> - 장치 관리: 장치 드라이버를 통한 하드웨어 장치의 관리와 통신을 가능하게 함
> - 정보 유지 : 시스템 정보의 조회 및 수정을 수행
>
> 작동 방식
>
> - 사용자 프로그램은 시스템 호출을 통해 커널에 서비스를 요청한다
> - 커널은 해당 요청을 처리하고 결과를 사용자 프로그램에 반환한다. 

## 프로세스

### 프로세스 개념

> 프로세스란 실행중인 프로그램을 뜻한다. 
>
> 이는 코드, 데이터, 스택 및 힙 영역 등의 메모리 할당과 실행에 필요한 자원들을 포함한다.
>
> 특성
>
> - 동적 성격 : 프로세스는 실행 중에 동적으로 변한다. (메모리 사용량, CPU 사용 시간 .. )
> - 병행 실행 : 다중 프로세스 환경에서 여러 프로세스가 동시에실행될 수 있따. 

### 프로세스 상태

> 프로세스는 생명주기 동안 여러 상태를 거친다.
>
> - 신규(New) : 프로세스 생성 중 
> - 실행가능(Runnable) : CPU를 기다리는 상태
> - 실행(Running) : CPU에서 명령어를 실행하는 상태
> - 대기(Waiting) : 특정 이벤트를 기다리는 상태 (ex I/O 완료) 
> - 종료(Terminated) : 실행이 완료되어 종료된 상태

### 프로세스 제어 블록 (Process Control Block)

> 정의
>
> - PCB는 특정 프로세스에 대한 중요한 정보를 저장하는 운영체제의 데이터 구조이다.
>
> 포함 정보
>
> - 프로세스 식별자(PID), 프로그램 카운터, 레지스터 값, 스케줄링 정보, 메모리 관리 정보, 입출력 상태 정보

### 프로세스 문맥 교환 (Context Switch)

> 정의
>
> - 문맥 교환은 CPU가 하나의 프로세스에서 다른 프로세스로 전환할 때 발생하는 과정이다.
>
> 특성 및 과정
>
> - 현재 실행 중인 프로세스의 상태를 저장하고, 다음 실행할 프로세스의 상태를 불러온다
> - 이 과정은 시간과 자원을 소모하므로, 효율적인 스케줄링이 중요하다. 

## 스레드

### 스레드 개념

> 스레드란 프로세스 내에서 실행되는 실행 단위이다.
>
> 프로세스 자원을 공유하면서 독립적으로 명령어를 실행 할 수 있다. 
>
> [특성]
>
> - 경량화된 프로세스 : 프로세스에 비해 생성 비용이 적고 컨텍스트 스위칭이 빠르다.
> - 자원 공유 : 같은 프로세스 내의 스레드들은 메모리와 자원을 공유한다. 

### 멀티스레드의 구조

> - 스레드마다 별도의 스택 
>   - 각 스레드는 자신만의 스택을 가지지만 힙 영역으 공유한다.
> - 공유자원
>   - 코드, 데이터, 파일, 신호 등은 모든 스레드에 의해 공유된다. 

### 멀티스레드의 장단점

> 장점
>
> - 자원 효율성
>   - 동일한 프로세스 내에서 스레드를 여러 개 생성하므로, 자원을 효율적으로 사용할 수 있다.
> - 성능 향상
>   - 스레드 간 컨텍스트 스위칭 비용이 낮아, 프로그램의 응답 시간과 처리량이 개선된다.
> - 단순한 통신 메커니즘
>   - 같은 프로세스 내에서 실해오디기 때문에, 스레드 간의 데이터 공유와 통신이 용이하다.
>
> 단점
>
> - 동기화 문제
>   - 여러 스레드가 동일한 자원을 공유하기 때문에 데이터 일관성과 무결성을 유지하기 위한 동기화가 필요하다.
> - 복잡한 프로그래밍 및 디버깅
>   - 스레드 간의 상호 작용으로 인해 프로그램의 복잡도가 증가하고, 디버깅이 어려워 질 수 있다.
> - 데드락 위험성
>   - 스레드들이 서로 기다리는 상황이 발생할 경우 데드락이 발생할 수 있다.

### 멀티 프로세스 VS 멀티 스레드

> |               | 메모리 사용 / CPU시간            | Context Switching | 안정성 |
> | ------------- | -------------------------------- | ----------------- | ------ |
> | multi process | 많은 메모리 공간 / CPU 시간 차지 | 느림              | 높음   |
> | multi thread  | 적은 메모리 공간 / CPU 시간 차지 | 빠름              | 낮음   |

---

## Question

- 운영체제의 개념과 역할에 대해서 설명해주세요.
- 커널과 시스템 호출에 대해서 설명해주세요.
- 두가지 thread가 있다고 가정해보겠습니다. (t1, t2) t1에서 interrupt 가 발생했을 때 어떠한 기작이 일어나는 지 설명해주세요.
  - (User mode, Kernel mode)
- 프로세스와 스레드의 개념에 대해서 간단히 설명해주세요.
- 프로세스 상태와 각 상태를 설명해주세요
- 프로세스 제어 블록이란 무엇이낙요?
- Context Switching 과정에 대해서 설명해주세요
- 멀티스레드와 멀티 프로세스는 어떻게 다른가요?

